<!DOCTYPE html>
<html>

<head>
  <title>Diagrama | <%= proyecto.name %>
  </title>
  <link rel="shortcut icon" href="resources/css/logoFICCT.jpg" type="image/x-icon">

  <!-- Enlace al archivo CSS externo -->
  <link rel="stylesheet" href="/resources/css/style2.css">

  <!-- Font Awesome para √≠conos -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
</head>

<body>
  <!-- Barra de Herramientas -->
  <div class="container">
    <div class="toolbar-section">
      <button class="componentes tool-button active" id="tool-select" title="Select/Move"><i class="fas fa-mouse-pointer"></i></button>
      <button class="componentes tool-button" id="tool-class" title="Add Class">Clase</button>
      <button class="componentes tool-button" id="tool-one_to_many" title="one_to_many">one_to_many</button>
      <button class="componentes tool-button" id="tool-one_to_one" title="one_to_one">one_to_one</button>
      <button class="componentes tool-button" id="tool-many_to_many" title="many_to_many">many_to_many</button>
      <button class="componentes tool-button" id="tool-many_to_one" title="many_to_one">many_to_one</button>
      <button class="componentes tool-button" id="tool-delete" title="Delete"><i class="fas fa-eraser">Delete</i></button>
    </div>

    <div class="toolbar-section">
      <strong>Actions:</strong>
      <button class="componentes" id="saveButton"><i class="fas fa-save"></i> Save</button>
      <button class="componentes" id="exportImageButton" title="Export as Image">Export IMG</button>
      <button class="componentes" id="downloadJavaButton" title="Export Project">SpringBoot</button>

    </div>
    
    <div class="ai-toolbar">
      <h4>‚ú® Generar con IA</h4>
      <textarea id="ai-description" placeholder="Ejemplos:
        ‚Ä¢ 'Agrega una clase Producto con id:Long, nombre:String, precio:Double'
        ‚Ä¢ 'Necesito un ejemplo de sistema de ventas'
        ‚Ä¢ 'A√±ade relaci√≥n one-to-many entre Cliente y Pedido'
        ‚Ä¢ 'Genera 3 clases para un sistema bancario'" rows="4"
        style="width: 300px; padding: 8px; margin: 5px 0;"></textarea>
    
      <button id="generate-with-ai"
        style="padding: 8px 15px; background: #2196F3; color: white; border: none; border-radius: 4px; cursor: pointer;">
        üöÄ Generar y Agregar
      </button>
    
      <div id="ai-loading" style="display: none; margin-top: 10px; color: #666;">
        ‚è≥ Generando con Gemini AI...
      </div>
    
      <div style="font-size: 12px; color: #666; margin-top: 10px;">
        üí° Los nuevos elementos se agregar√°n al diagrama actual
      </div>
    </div>
  </div>

  <!-- Canvas para dibujar el diagrama -->
  <div class="lienzo">
    <canvas id="canvas" width="1500" height="800"></canvas>
  </div>

  <!-- Campos ocultos para pizarra_id y proyecto_name -->
  <input id="objetos" type="hidden" value='<%= JSON.stringify(proyecto.objetos) %>'>

  <input id="pizarra_id" type="hidden" value="<%= pizarra_id %>">
  <input id="proyecto_name" type="hidden" value="<%= proyecto.name %>">

  <!-- Modal para editar clases -->
  <div id="classModal" class="modal">
    <div class="modal-content">
      <span id="closeModal" class="close">&times;</span>
      <h2>Editar Clase</h2>
      <label for="className">Nombre de la clase:</label><br>
      <input type="text" id="className"><br><br>
      <h3>Atributos</h3>
      <textarea id="classAttributes" rows="5" placeholder="Ingresa cada atributo en una l√≠nea separada"></textarea><br><br>
      <button id="saveClass">Guardar</button>
    </div>
  </div>

  <!-- Scripts -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Scripts personalizados -->

 

  <script src="/resources/js/UMLClass.js"></script>
  <script src="/resources/js/UMLRelationship.js"></script>
  <script src="/resources/js/main.js"></script>
  <!-- <script src="/resources/js/extras.js"></script> -->


</body>

</html>